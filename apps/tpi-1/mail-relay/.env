ACCOUNT_PROVISIONER=LDAP
ENABLE_CLAMAV=0
ENABLE_AMAVIS=0
ENABLE_DNSBL=0
ENABLE_FAIL2BAN=0
ENABLE_POLICYD_SPF=0
ENABLE_OPENDMARC=0
ENABLE_OPENDKIM=0
ENABLE_FETCHMAIL=0
ENABLE_POP3=0
ENABLE_RSPAMD=0
ENABLE_SPAMASSASSIN=0
ENABLE_POSTGREY=0
ENABLE_IMAP=0
ONE_DIR=1
SMTP_ONLY=1
# this is only defined to fix chown issue during startup
RSPAMD_DMS_DKIM_D=/tmp/docker-mailserver/rspamd/dkim
SPOOF_PROTECTION=1
POSTFIX_INET_PROTOCOLS=ipv4
ENABLE_SASLAUTHD=1
LDAP_BIND_DN=cn=mailserver,ou=users,dc=wahooli,dc=homelab
# LDAP_BIND_PW=qweewqeqewqeqwqeeq
LDAP_QUERY_FILTER_SENDERS=(|(&(mailEnabled=TRUE)(mailAlias=%s))(&(mailEnabled=TRUE)(mail=%s)))
LDAP_QUERY_FILTER_USER=(&(uid=%u)(objectClass=inetOrgPerson)(mailEnabled=TRUE))
LDAP_SEARCH_BASE=ou=users,dc=wahooli,dc=homelab
LDAP_SERVER_HOST=ldaps://mail-relay-openldap
LOG_LEVEL=warn
RSPAMD_LEARN=0
RSPAMD_HFILTER=0
SUPERVISOR_LOGLEVEL=warn
OVERRIDE_HOSTNAME=mail-relay.default.svc.cluster.local
SASLAUTHD_LDAP_BIND_DN=cn=mailserver,ou=users,dc=wahooli,dc=homelab
SASLAUTHD_LDAP_FILTER=(&(uid=%U)(objectClass=inetOrgPerson)(mailEnabled=TRUE))
# SASLAUTHD_LDAP_PASSWORD=qweewqeqewqeqwqeeq
SASLAUTHD_LDAP_SEARCH_BASE=ou=users,dc=wahooli,dc=homelab
# SASLAUTHD_LDAP_SERVER=ldaps://mail-relay-openldap
SASLAUTHD_LDAP_TLS_CHECK_PEER=yes
SASLAUTHD_LDAP_AUTH_METHOD=bind
SASLAUTHD_LDAP_START_TLS=no
SASLAUTHD_LDAP_PASSWORD_ATTR=userPassword
SASLAUTHD_MECHANISMS=ldap
TZ=Europe/Helsinki
SSL_TYPE=manual
SSL_CERT_PATH=/secrets/tls.crt
SSL_KEY_PATH=/secrets/tls.key
SASLAUTHD_LDAP_TLS_CACERT_FILE=/secrets/ca.crt
