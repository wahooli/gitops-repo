apiVersion: operator.victoriametrics.com/v1beta1
kind: VMPodScrape
metadata:
  name: authentik
  namespace: default
spec:
  jobLabel: scrape-job-name
  namespaceSelector:
    matchNames:
    - default
    - authentik
  podMetricsEndpoints:
  - port: http-metrics
    scheme: http
    path: /metrics
  - port: metrics
    scheme: http
    path: /metrics
  selector:
    matchExpressions:
    - key: app
      operator: In
      values:
      - authentik-outpost
      - authentik-server
    # - key: app.kubernetes.io/name
    #   operator: In
    #   values:
    #   - authentik-outpost-proxy
    #   - authentik
    # - key: app.kubernetes.io/component
    #   operator: In
    #   values:
    #   - server
    #   - outpost
