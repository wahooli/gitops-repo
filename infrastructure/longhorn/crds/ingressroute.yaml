apiVersion: traefik.containo.us/v1alpha1
kind: IngressRoute
metadata:
 name: longhorn-http
 namespace: longhorn-system
spec:
 entryPoints:
  - web
 routes:
  - match: Host(`longhorn.absolutist.it`) || Host(`longhorn.wahoo.li`)
    kind: Rule
    middlewares:
     - name: local-ip-only
     - name: https-only
    services:
     - name: longhorn-frontend
       port: 80
---
apiVersion: traefik.containo.us/v1alpha1
kind: IngressRoute
metadata:
 name: longhorn-https
 namespace: longhorn-system
spec:
 entryPoints:
  - websecure
 routes:
  - match: Host(`longhorn.absolutist.it`) || Host(`longhorn.wahoo.li`)
    kind: Rule
    middlewares:
     - name: local-ip-only
     - name: forwarded-proto-https
     - name: gzip
    services:
     - name: longhorn-frontend
       port: 80
 tls:
  secretName: tls-longhorn-ingress